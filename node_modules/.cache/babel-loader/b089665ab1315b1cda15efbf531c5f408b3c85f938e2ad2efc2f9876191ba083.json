{"ast":null,"code":"// src/Checkout.js\nimport React,{useState,useMemo}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import\"./Checkout.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Checkout=()=>{var _addresses$find;const location=useLocation();const navigate=useNavigate();// ✅ Receive selected items from Cart\nconst selectedItems=Array.isArray(location.state)?location.state:[];// ---------------- ADDRESSES ----------------\nconst[addresses]=useState([{id:1,name:\"John Doe\",phone:\"9876543210\",address:\"123, ABC Apartments, MG Road\",city:\"Bangalore\",pincode:\"560001\",state:\"Karnataka\",default:true},{id:2,name:\"Jane Smith\",phone:\"9876543211\",address:\"456, XYZ Street, 2nd Block\",city:\"Bangalore\",pincode:\"560002\",state:\"Karnataka\",default:false}]);const[selectedAddressId,setSelectedAddressId]=useState(((_addresses$find=addresses.find(a=>a.default))===null||_addresses$find===void 0?void 0:_addresses$find.id)||null);// ---------------- DELIVERY CHARGES (PER PRODUCT) ----------------\nconst deliveryCharges=useMemo(()=>{const charges={};selectedItems.forEach(item=>{charges[item.id]=charges[item.id]||(Math.random()>0.5?40:50);});return charges;},[selectedItems]);// ---------------- PRICE CALCULATION ----------------\nconst subtotal=selectedItems.reduce((sum,item)=>sum+item.price*item.quantity,0);const deliveryTotal=selectedItems.reduce((sum,item)=>sum+deliveryCharges[item.id]*item.quantity,0);const totalAmount=subtotal+deliveryTotal;// ---------------- PROCEED FUNCTION ----------------\nconst handleProceed=()=>{if(!selectedAddressId){alert(\"Please select a delivery address\");return;}navigate(\"/payment\",{state:{selectedItems,selectedAddress:addresses.find(a=>a.id===selectedAddressId),totalAmount}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-page\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Checkout\"}),/*#__PURE__*/_jsx(\"div\",{className:\"checkout-products\",children:selectedItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-product\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info\",children:[/*#__PURE__*/_jsx(\"h4\",{children:item.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u20B9\",item.price,\" \\xD7 \",item.quantity]}),/*#__PURE__*/_jsxs(\"p\",{className:\"delivery-line\",children:[\"Delivery: \\u20B9\",deliveryCharges[item.id],\" per item\"]})]})]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkout-address\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Delivery Address\"}),addresses.map(addr=>/*#__PURE__*/_jsxs(\"label\",{className:\"address-card\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",checked:selectedAddressId===addr.id,onChange:()=>setSelectedAddressId(addr.id)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:addr.name}),\" | \",addr.phone]}),/*#__PURE__*/_jsxs(\"p\",{children:[addr.address,\", \",addr.city,\" - \",addr.pincode]}),/*#__PURE__*/_jsx(\"p\",{children:addr.state}),addr.default&&/*#__PURE__*/_jsx(\"span\",{className:\"default-badge\",children:\"Default\"})]})]},addr.id)),/*#__PURE__*/_jsx(\"button\",{className:\"add-address-btn\",onClick:()=>navigate(\"/address\"),children:\"+ Add New Address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"price-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Subtotal\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",subtotal]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-row\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Delivery Charges\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u20B9\",deliveryTotal]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"price-row total\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Total\"}),/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9\",totalAmount]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"checkout-proceed\",children:/*#__PURE__*/_jsx(\"button\",{className:\"proceed-btn\",onClick:handleProceed,children:\"Proceed to Payment\"})})]});};export default Checkout;","map":{"version":3,"names":["React","useState","useMemo","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","Checkout","_addresses$find","location","navigate","selectedItems","Array","isArray","state","addresses","id","name","phone","address","city","pincode","default","selectedAddressId","setSelectedAddressId","find","a","deliveryCharges","charges","forEach","item","Math","random","subtotal","reduce","sum","price","quantity","deliveryTotal","totalAmount","handleProceed","alert","selectedAddress","className","children","map","src","image","alt","addr","type","checked","onChange","onClick"],"sources":["C:/Users/dell/Desktop/e-commerce/ecommerce/src/Checkout.js"],"sourcesContent":["// src/Checkout.js\r\nimport React, { useState, useMemo } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport \"./Checkout.css\";\r\n\r\nconst Checkout = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  // ✅ Receive selected items from Cart\r\n  const selectedItems = Array.isArray(location.state) ? location.state : [];\r\n\r\n  // ---------------- ADDRESSES ----------------\r\n  const [addresses] = useState([\r\n    {\r\n      id: 1,\r\n      name: \"John Doe\",\r\n      phone: \"9876543210\",\r\n      address: \"123, ABC Apartments, MG Road\",\r\n      city: \"Bangalore\",\r\n      pincode: \"560001\",\r\n      state: \"Karnataka\",\r\n      default: true,\r\n    },\r\n    {\r\n      id: 2,\r\n      name: \"Jane Smith\",\r\n      phone: \"9876543211\",\r\n      address: \"456, XYZ Street, 2nd Block\",\r\n      city: \"Bangalore\",\r\n      pincode: \"560002\",\r\n      state: \"Karnataka\",\r\n      default: false,\r\n    },\r\n  ]);\r\n\r\n  const [selectedAddressId, setSelectedAddressId] = useState(\r\n    addresses.find((a) => a.default)?.id || null\r\n  );\r\n\r\n  // ---------------- DELIVERY CHARGES (PER PRODUCT) ----------------\r\n  const deliveryCharges = useMemo(() => {\r\n    const charges = {};\r\n    selectedItems.forEach((item) => {\r\n      charges[item.id] = charges[item.id] || (Math.random() > 0.5 ? 40 : 50);\r\n    });\r\n    return charges;\r\n  }, [selectedItems]);\r\n\r\n  // ---------------- PRICE CALCULATION ----------------\r\n  const subtotal = selectedItems.reduce(\r\n    (sum, item) => sum + item.price * item.quantity,\r\n    0\r\n  );\r\n\r\n  const deliveryTotal = selectedItems.reduce(\r\n    (sum, item) => sum + deliveryCharges[item.id] * item.quantity,\r\n    0\r\n  );\r\n\r\n  const totalAmount = subtotal + deliveryTotal;\r\n\r\n  // ---------------- PROCEED FUNCTION ----------------\r\n  const handleProceed = () => {\r\n    if (!selectedAddressId) {\r\n      alert(\"Please select a delivery address\");\r\n      return;\r\n    }\r\n\r\n    navigate(\"/payment\", {\r\n      state: {\r\n        selectedItems,\r\n        selectedAddress: addresses.find((a) => a.id === selectedAddressId),\r\n        totalAmount,\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"checkout-page\">\r\n      <h2>Checkout</h2>\r\n\r\n      {/* ================= PRODUCTS ================= */}\r\n      <div className=\"checkout-products\">\r\n        {selectedItems.map((item) => (\r\n          <div className=\"checkout-product\" key={item.id}>\r\n            <img src={item.image} alt={item.name} />\r\n            <div className=\"product-info\">\r\n              <h4>{item.name}</h4>\r\n              <p>₹{item.price} × {item.quantity}</p>\r\n              <p className=\"delivery-line\">\r\n                Delivery: ₹{deliveryCharges[item.id]} per item\r\n              </p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* ================= ADDRESS ================= */}\r\n      <div className=\"checkout-address\">\r\n        <h3>Delivery Address</h3>\r\n        {addresses.map((addr) => (\r\n          <label key={addr.id} className=\"address-card\">\r\n            <input\r\n              type=\"radio\"\r\n              checked={selectedAddressId === addr.id}\r\n              onChange={() => setSelectedAddressId(addr.id)}\r\n            />\r\n            <div>\r\n              <p>\r\n                <strong>{addr.name}</strong> | {addr.phone}\r\n              </p>\r\n              <p>\r\n                {addr.address}, {addr.city} - {addr.pincode}\r\n              </p>\r\n              <p>{addr.state}</p>\r\n              {addr.default && <span className=\"default-badge\">Default</span>}\r\n            </div>\r\n          </label>\r\n        ))}\r\n        <button\r\n          className=\"add-address-btn\"\r\n          onClick={() => navigate(\"/address\")}\r\n        >\r\n          + Add New Address\r\n        </button>\r\n      </div>\r\n\r\n      {/* ================= PRICE SUMMARY ================= */}\r\n      <div className=\"price-box\">\r\n        <div className=\"price-row\">\r\n          <span>Subtotal</span>\r\n          <span>₹{subtotal}</span>\r\n        </div>\r\n\r\n        <div className=\"price-row\">\r\n          <span>Delivery Charges</span>\r\n          <span>₹{deliveryTotal}</span>\r\n        </div>\r\n\r\n        <hr />\r\n\r\n        <div className=\"price-row total\">\r\n          <strong>Total</strong>\r\n          <strong>₹{totalAmount}</strong>\r\n        </div>\r\n      </div>\r\n\r\n      {/* ================= PROCEED ================= */}\r\n      <div className=\"checkout-proceed\">\r\n        <button className=\"proceed-btn\" onClick={handleProceed}>\r\n          Proceed to Payment\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,OAAO,KAAQ,OAAO,CAChD,OAASC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CAC3D,MAAO,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,KAAM,CAAAC,QAAQ,CAAGA,CAAA,GAAM,KAAAC,eAAA,CACrB,KAAM,CAAAC,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAS,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAE9B;AACA,KAAM,CAAAS,aAAa,CAAGC,KAAK,CAACC,OAAO,CAACJ,QAAQ,CAACK,KAAK,CAAC,CAAGL,QAAQ,CAACK,KAAK,CAAG,EAAE,CAEzE;AACA,KAAM,CAACC,SAAS,CAAC,CAAGhB,QAAQ,CAAC,CAC3B,CACEiB,EAAE,CAAE,CAAC,CACLC,IAAI,CAAE,UAAU,CAChBC,KAAK,CAAE,YAAY,CACnBC,OAAO,CAAE,8BAA8B,CACvCC,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE,QAAQ,CACjBP,KAAK,CAAE,WAAW,CAClBQ,OAAO,CAAE,IACX,CAAC,CACD,CACEN,EAAE,CAAE,CAAC,CACLC,IAAI,CAAE,YAAY,CAClBC,KAAK,CAAE,YAAY,CACnBC,OAAO,CAAE,4BAA4B,CACrCC,IAAI,CAAE,WAAW,CACjBC,OAAO,CAAE,QAAQ,CACjBP,KAAK,CAAE,WAAW,CAClBQ,OAAO,CAAE,KACX,CAAC,CACF,CAAC,CAEF,KAAM,CAACC,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGzB,QAAQ,CACxD,EAAAS,eAAA,CAAAO,SAAS,CAACU,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACJ,OAAO,CAAC,UAAAd,eAAA,iBAAhCA,eAAA,CAAkCQ,EAAE,GAAI,IAC1C,CAAC,CAED;AACA,KAAM,CAAAW,eAAe,CAAG3B,OAAO,CAAC,IAAM,CACpC,KAAM,CAAA4B,OAAO,CAAG,CAAC,CAAC,CAClBjB,aAAa,CAACkB,OAAO,CAAEC,IAAI,EAAK,CAC9BF,OAAO,CAACE,IAAI,CAACd,EAAE,CAAC,CAAGY,OAAO,CAACE,IAAI,CAACd,EAAE,CAAC,GAAKe,IAAI,CAACC,MAAM,CAAC,CAAC,CAAG,GAAG,CAAG,EAAE,CAAG,EAAE,CAAC,CACxE,CAAC,CAAC,CACF,MAAO,CAAAJ,OAAO,CAChB,CAAC,CAAE,CAACjB,aAAa,CAAC,CAAC,CAEnB;AACA,KAAM,CAAAsB,QAAQ,CAAGtB,aAAa,CAACuB,MAAM,CACnC,CAACC,GAAG,CAAEL,IAAI,GAAKK,GAAG,CAAGL,IAAI,CAACM,KAAK,CAAGN,IAAI,CAACO,QAAQ,CAC/C,CACF,CAAC,CAED,KAAM,CAAAC,aAAa,CAAG3B,aAAa,CAACuB,MAAM,CACxC,CAACC,GAAG,CAAEL,IAAI,GAAKK,GAAG,CAAGR,eAAe,CAACG,IAAI,CAACd,EAAE,CAAC,CAAGc,IAAI,CAACO,QAAQ,CAC7D,CACF,CAAC,CAED,KAAM,CAAAE,WAAW,CAAGN,QAAQ,CAAGK,aAAa,CAE5C;AACA,KAAM,CAAAE,aAAa,CAAGA,CAAA,GAAM,CAC1B,GAAI,CAACjB,iBAAiB,CAAE,CACtBkB,KAAK,CAAC,kCAAkC,CAAC,CACzC,OACF,CAEA/B,QAAQ,CAAC,UAAU,CAAE,CACnBI,KAAK,CAAE,CACLH,aAAa,CACb+B,eAAe,CAAE3B,SAAS,CAACU,IAAI,CAAEC,CAAC,EAAKA,CAAC,CAACV,EAAE,GAAKO,iBAAiB,CAAC,CAClEgB,WACF,CACF,CAAC,CAAC,CACJ,CAAC,CAED,mBACEjC,KAAA,QAAKqC,SAAS,CAAC,eAAe,CAAAC,QAAA,eAC5BxC,IAAA,OAAAwC,QAAA,CAAI,UAAQ,CAAI,CAAC,cAGjBxC,IAAA,QAAKuC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,CAC/BjC,aAAa,CAACkC,GAAG,CAAEf,IAAI,eACtBxB,KAAA,QAAKqC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BxC,IAAA,QAAK0C,GAAG,CAAEhB,IAAI,CAACiB,KAAM,CAACC,GAAG,CAAElB,IAAI,CAACb,IAAK,CAAE,CAAC,cACxCX,KAAA,QAAKqC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BxC,IAAA,OAAAwC,QAAA,CAAKd,IAAI,CAACb,IAAI,CAAK,CAAC,cACpBX,KAAA,MAAAsC,QAAA,EAAG,QAAC,CAACd,IAAI,CAACM,KAAK,CAAC,QAAG,CAACN,IAAI,CAACO,QAAQ,EAAI,CAAC,cACtC/B,KAAA,MAAGqC,SAAS,CAAC,eAAe,CAAAC,QAAA,EAAC,kBAChB,CAACjB,eAAe,CAACG,IAAI,CAACd,EAAE,CAAC,CAAC,WACvC,EAAG,CAAC,EACD,CAAC,GAR+Bc,IAAI,CAACd,EASvC,CACN,CAAC,CACC,CAAC,cAGNV,KAAA,QAAKqC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,eAC/BxC,IAAA,OAAAwC,QAAA,CAAI,kBAAgB,CAAI,CAAC,CACxB7B,SAAS,CAAC8B,GAAG,CAAEI,IAAI,eAClB3C,KAAA,UAAqBqC,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3CxC,IAAA,UACE8C,IAAI,CAAC,OAAO,CACZC,OAAO,CAAE5B,iBAAiB,GAAK0B,IAAI,CAACjC,EAAG,CACvCoC,QAAQ,CAAEA,CAAA,GAAM5B,oBAAoB,CAACyB,IAAI,CAACjC,EAAE,CAAE,CAC/C,CAAC,cACFV,KAAA,QAAAsC,QAAA,eACEtC,KAAA,MAAAsC,QAAA,eACExC,IAAA,WAAAwC,QAAA,CAASK,IAAI,CAAChC,IAAI,CAAS,CAAC,MAAG,CAACgC,IAAI,CAAC/B,KAAK,EACzC,CAAC,cACJZ,KAAA,MAAAsC,QAAA,EACGK,IAAI,CAAC9B,OAAO,CAAC,IAAE,CAAC8B,IAAI,CAAC7B,IAAI,CAAC,KAAG,CAAC6B,IAAI,CAAC5B,OAAO,EAC1C,CAAC,cACJjB,IAAA,MAAAwC,QAAA,CAAIK,IAAI,CAACnC,KAAK,CAAI,CAAC,CAClBmC,IAAI,CAAC3B,OAAO,eAAIlB,IAAA,SAAMuC,SAAS,CAAC,eAAe,CAAAC,QAAA,CAAC,SAAO,CAAM,CAAC,EAC5D,CAAC,GAfIK,IAAI,CAACjC,EAgBV,CACR,CAAC,cACFZ,IAAA,WACEuC,SAAS,CAAC,iBAAiB,CAC3BU,OAAO,CAAEA,CAAA,GAAM3C,QAAQ,CAAC,UAAU,CAAE,CAAAkC,QAAA,CACrC,mBAED,CAAQ,CAAC,EACN,CAAC,cAGNtC,KAAA,QAAKqC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBtC,KAAA,QAAKqC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxC,IAAA,SAAAwC,QAAA,CAAM,UAAQ,CAAM,CAAC,cACrBtC,KAAA,SAAAsC,QAAA,EAAM,QAAC,CAACX,QAAQ,EAAO,CAAC,EACrB,CAAC,cAEN3B,KAAA,QAAKqC,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBxC,IAAA,SAAAwC,QAAA,CAAM,kBAAgB,CAAM,CAAC,cAC7BtC,KAAA,SAAAsC,QAAA,EAAM,QAAC,CAACN,aAAa,EAAO,CAAC,EAC1B,CAAC,cAENlC,IAAA,QAAK,CAAC,cAENE,KAAA,QAAKqC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC9BxC,IAAA,WAAAwC,QAAA,CAAQ,OAAK,CAAQ,CAAC,cACtBtC,KAAA,WAAAsC,QAAA,EAAQ,QAAC,CAACL,WAAW,EAAS,CAAC,EAC5B,CAAC,EACH,CAAC,cAGNnC,IAAA,QAAKuC,SAAS,CAAC,kBAAkB,CAAAC,QAAA,cAC/BxC,IAAA,WAAQuC,SAAS,CAAC,aAAa,CAACU,OAAO,CAAEb,aAAc,CAAAI,QAAA,CAAC,oBAExD,CAAQ,CAAC,CACN,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAArC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}